{
  "hash": "9a8da995d227d5e817ba4ee4af8a248a",
  "result": {
    "markdown": "---\ntitle: \"Characteristics of Successful Protests\"\nauthor: \"Angel Feliz\"\ndate: \"25 December 2022\"\nexecute:\n  echo: true\n  message: false\n  warning: false\nformat: \n  html:\n    fig-width: 12\n    fig-height: 8\n    fig-align: \"center\"\n    toc: true\n    toc-title: Index\n    toc-location: left\n    self-contained: true\n    number-sections: true\n    smooth-scroll: true\nimage: \"Protesting-Sign.jpg\"\ncategories: [Data Cleaning, Text Mining]\n---\n\n\n<style>\n\ncode{color: #0c5bd1;}\n\n.center {\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n  width: 50%;\n}\n\n</style>\n\n# Introduction {.unnumbered}\n\nProtests are an important part of society change. In this time we are going to explore data from **The Mass Mobilization Project** which contains information about protests against governments, and contains a variety of variables such as location, dates and number of participants. The data is available in the [Mass Protest Data](https://github.com/datacamp/careerhub-data/tree/master/Mass%20Protest%20Data) Data Camp Github folder.\n\nThe goal of this project is to define what characteristics share successful protests worldwide. The first step to achieve that it is to define what do I mean with **successful**. As most the protests demand state actions _I consider that a **protest is successful** when there is a reconciliation between the two parts_.\n\n<img src=\"Protesting-Sign.jpg\" alt=\"Source: https://www.ucf.edu/news/7-influential-protests-in-american-history/\" class=\"center\">\n\nTo make that possible we will apply the next skills during the process:\n\n- **Functional programming** with *R*\n- **Data manipulation** with *data.table*, *lubridate* and *stringr*\n- **Text mining** with *tidytext*\n- **Data visualization** with *ggplot2*, *scales*, *forcats* and *patchwork*\n- **Network visualization** with *igraph* and *ggraph*\n- **Automated reporting** with *quarto*, *flextable*, *html* and *css*\n\nThe [source code](https://github.com/AngelFelizR/myblog/tree/main/projs/mass-protest-data) of this project is available on Github.\n\n# Enveroment set-up\n\nBefore starting to find insights from data it's needed to load in R the functions and the data that we will use during the process.\n\n## Libraries importantion\n\nLibraries are very useful, but they can change over time making that the code used today might not work tomorrow. So, the first step before loading the libraries is to save a file (*renv.lock*) with all R package dependencies and the next code line we validate if we are tuning the project using the same version of package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| echo: false\n#| include: false\n\nif (!requireNamespace(\"renv\", quietly = TRUE)) install.packages(\"renv\")\nrenv::restore()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n* The library is already synchronized with the lockfile.\n```\n:::\n:::\n\n\nNow we can load the libraries to use. To avoid unnecessary conflict if we just need a function from a library we copy the function in the global environment by using the syntax `PackageName::FunctionName`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(data.table)\nlibrary(lubridate)\nlibrary(stringr)\n\nlibrary(flextable)\n\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(forcats)\nlibrary(igraph)\nlibrary(ggraph)\n\nlibrary(tidytext)\n\nglimpse <- pillar::glimpse\ncodelist_panel <- countrycode::codelist_panel\ncorrelation <- correlation::correlation\nhere <- here::here\n```\n:::\n\n\n\n## Custom functions\n\nOpen-source packages are very powerful as they provide general purpose functions, but it's also useful to have some custom project functions to perform repetitive task and improve code readability. During this project, we will use the following functions group it purpose:\n\n### Styling\n\n- **custom_theme:** Defines the style of all ggplots across the project.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCustomTheme <-\ntheme_light()+\n  theme(axis.text = element_text(size = 15),\n        axis.title = element_text(size = 16, face = \"bold\"),\n        strip.text = element_text(size = 16, face = \"bold\"),\n        plot.title = element_text(size = 25, face = \"bold\", \n                                  hjust = 0.5, margin = margin(b = 15)),\n        \n        legend.title = element_text(size = 15, face = \"bold\"),\n        legend.text = element_text(size = 14))\n\ntheme_set(CustomTheme)\nrm(CustomTheme)\n```\n:::\n\n\n\n- **style_table:** Takes a `data.frame` and renders it as html table with a custom style.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstyle_table <- function(DF){\n  \n  flextable(DF) |>\n  theme_vanilla() |>\n  autofit()\n  \n}\n```\n:::\n\n\n\n### Data cleaning\n\n- **lower_clean_name:** Lower the case all words in a vector and remove any character that isn't a word.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlower_clean_name <- function(text){\n  \n  str_to_lower(text) |>\n    str_replace_all(\"[^A-Za-z ']\",\" \") |> \n    str_squish()\n}\n```\n:::\n\n\n- **clean_amount:** Transforms a character vector with number and commas into a double one.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclean_amount <- \\(x) gsub(\",\",\"\",x) |> as.double()\n```\n:::\n\n\n### Data transformation\n\n- **find_string_approximation:** This function merges two data.tables to generate all possible combinations between them and select for each id the match that minimize the string distance between words of both tables. This function was inspired by the `reclin2` package as both follow simular steps.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfind_string_approximation <- function(DT1,\n                                      DT2,\n                                      id.var,\n                                      merge.by,\n                                      match.vars,\n                                      min.tolerance = 0.7,\n                                      stringdist.method = \"lcs\"){\n  \n  merge(DT1, DT2, by = merge.by, allow.cartesian = TRUE\n  )[, weight := 1 - stringdist::stringdist(get(match.vars[1]),get(match.vars[2]), \n                                           method = stringdist.method) /\n                    (nchar(get(match.vars[1]))+nchar(get(match.vars[2])))\n  ][weight >= min.tolerance\n  ][order(-weight),\n    unique(.SD, by = id.var)]\n  \n}\n```\n:::\n\n\n\n### Plotting\n\n\n- **plot_word_found_distribution:** Creates a plot to show how the found words are distributed acording the number of words that have the `word.count.var`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_word_found_distribution <- function(DT,\n                                         word.count.var,\n                                         prostest.id.found,\n                                         success.label,\n                                         no.found.label,\n                                         label.colors,\n                                         title = \"Number of words distribution\",\n                                         subtitle = \"\",\n                                         x.lab = \"Number of words\", \n                                         y.lab = \"\"){\n  \n  DT[!is.na(get(word.count.var)),\n     .(id,\n       word_count =  str_count(get(word.count.var),\" \")+1,\n       success = fifelse(id %in% prostest.id.found,\n                         success.label,\n                         no.found.label) |> \n                 factor(levels = names(label.colors)[c(2,1)] ))] |>\n    ggplot(aes(x = word_count,y = success, color = success))+\n    geom_jitter(alpha = 0.20, size = 2, height = 0.40, width = 0.15)+\n    scale_x_continuous(breaks = breaks_width(1,1))+\n    scale_color_manual(values = label.colors)+\n    labs(title = title, subtitle = subtitle, x = x.lab, y = y.lab)+\n    theme(plot.subtitle = element_text(size = 18, margin = margin(b = 15)),\n          panel.grid.major.y = element_blank(),\n          legend.position = \"none\")\n  \n}\n```\n:::\n\n\n\n## Data importation\n\nIn this section we will take the data available and load it into R as `data.table` objects.\n\n### Main data\n\n**ProtestRaw** will be the main reference to use during the analysis. Any other imported data during this project will be used to extend or clean the information given in this data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestRaw <-\n  fread(here(\"Raw-data/protest_data.csv\"), \n        na.strings = \"\", integer64 = \"double\")\n\nglimpse(ProtestRaw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 17,145\nColumns: 31\n$ id                    <dbl> 201990001, 201990002, 201990003, 201990004, 2019…\n$ country               <chr> \"Canada\", \"Canada\", \"Canada\", \"Canada\", \"Canada\"…\n$ ccode                 <int> 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, …\n$ year                  <int> 1990, 1990, 1990, 1990, 1990, 1990, 1991, 1991, …\n$ region                <chr> \"North America\", \"North America\", \"North America…\n$ protest               <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n$ protestnumber         <int> 1, 2, 3, 4, 5, 6, 1, 2, 1, 1, 2, 1, 2, 1, 2, 1, …\n$ startday              <int> 15, 25, 1, 12, 14, 19, 10, 28, 4, 16, 1, 1, 18, …\n$ startmonth            <int> 1, 6, 7, 7, 8, 9, 9, 9, 5, 5, 7, 9, 11, 2, 9, 10…\n$ startyear             <int> 1990, 1990, 1990, 1990, 1990, 1990, 1991, 1991, …\n$ endday                <int> 15, 25, 1, 6, 15, 19, 17, 2, 5, 16, 31, 1, 18, 2…\n$ endmonth              <int> 1, 6, 7, 9, 8, 9, 9, 10, 5, 5, 8, 9, 11, 2, 9, 1…\n$ endyear               <int> 1990, 1990, 1990, 1990, 1990, 1990, 1991, 1991, …\n$ protesterviolence     <int> 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, …\n$ location              <chr> \"national\", \"Montreal, Quebec\", \"Montreal, Quebe…\n$ participants_category <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ participants          <chr> \"1000s\", \"1000\", \"500\", \"100s\", \"950\", \"200\", \"1…\n$ protesteridentity     <chr> \"unspecified\", \"unspecified\", \"separatist parti …\n$ protesterdemand1      <chr> \"political behavior, process\", \"political behavi…\n$ protesterdemand2      <chr> \"labor wage dispute\", NA, NA, NA, NA, NA, NA, NA…\n$ protesterdemand3      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ protesterdemand4      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ stateresponse1        <chr> \"ignore\", \"ignore\", \"ignore\", \"accomodation\", \"c…\n$ stateresponse2        <chr> NA, NA, NA, NA, \"arrests\", \"shootings\", NA, NA, …\n$ stateresponse3        <chr> NA, NA, NA, NA, \"accomodation\", NA, NA, NA, NA, …\n$ stateresponse4        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ stateresponse5        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ stateresponse6        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ stateresponse7        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ sources               <chr> \"1. great canadian train journeys into history; …\n$ notes                 <chr> \"canada s railway passenger system was finally c…\n```\n:::\n:::\n\n\n### Complementary data\n\nLet's import complementary data to make sense, clean and expand the information provided in `ProtestRaw`.\n\n- **WorldCities:** It has information about 239 countries and their cities. It will be used to clean the `location` field in the main data. The data can be found in [Simple Maps](https://simplemaps.com/data/world-cities) as a free database.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWorldCities <-\n  fread(here(\"Raw-data/worldcities.csv\"), na.strings = \"\", sep=\",\",\n        select = c(\"country\",\"city_ascii\",\"capital\",\"population\")\n  )[order(country,-population)\n    \n  # Applying some manual modifications to assure that ProtestRaw and WorlCites\n  # use the same name for the same country\n  ][,`:=`(country = fcase(country == \"Hong Kong\",\"China\",\n                          country == \"The Gambia\",\"Gambia\",\n                          country == \"United Arab Emirates\",\"United Arab Emirate\",\n                          country == \"Cabo Verde\", \"Cape Verde\",\n                          country == \"Bosnia And Herzegovina\",\"Bosnia\",\n                          country == \"Slovakia\", \"Slovak Republic\",\n                          country == \"Czechia\",\"Czech Republic\",\n                          rep(TRUE,.N), country) |>\n                   lower_clean_name(),\n          city_ascii = lower_clean_name(city_ascii))\n   \n  # Identifying the capital of each country in each raw\n  ][!capital %like% \"\\\\w\", \n    capital := NA_character_\n  ][country == \"taiwan\" & city_ascii == \"taipei\", \n    capital := \"primary\"]\n\nglimpse(WorldCities)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 42,905\nColumns: 4\n$ country    <chr> \"afghanistan\", \"afghanistan\", \"afghanistan\", \"afghanistan\",…\n$ city_ascii <chr> \"kabul\", \"kandahar\", \"herat\", \"mazar e sharif\", \"taluqan\", …\n$ capital    <chr> \"primary\", \"admin\", \"admin\", \"admin\", \"admin\", \"admin\", \"ad…\n$ population <dbl> 4273156, 614254, 556205, 469247, 263800, 263312, 259809, 20…\n```\n:::\n:::\n\n\n- **CountryCode:** It has information of country codes from many institutions and we will use it to find out the `ccode` origin. It comes from the [countrycode](https://github.com/vincentarelbundock/countrycode) R package in the version 1.4.1.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCountryCode <-\n  codelist_panel |>\n  as.data.table() |>\n  (\\(DT) DT[year >= min(ProtestRaw$year), \n            .SD, \n            .SDcols= c(\"country.name.en\",\n                       \"country.name.en.regex\",\n                       names(DT)[sapply(DT, is.double)])\n         \n          # Germany, West correction from Raw-data/p5manualv2018.pdf\n         ][country.name.en == \"Germany\" & year == 1990,\n           c(\"p4n\",\"p5n\") := 260] )()\n\nglimpse(CountryCode)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 6,301\nColumns: 19\n$ country.name.en            <chr> \"Afghanistan\", \"Afghanistan\", \"Afghanistan\"…\n$ country.name.en.regex      <chr> \"afghan\", \"afghan\", \"afghan\", \"afghan\", \"af…\n$ year                       <dbl> 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1…\n$ cown                       <dbl> 700, 700, 700, 700, 700, 700, 700, 700, 700…\n$ fao                        <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2…\n$ gaul                       <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ gwn                        <dbl> 700, 700, 700, 700, 700, 700, 700, 700, 700…\n$ imf                        <dbl> 512, 512, 512, 512, 512, 512, 512, 512, 512…\n$ iso3n                      <dbl> 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4…\n$ iso4217n                   <dbl> 971, 971, 971, 971, 971, 971, 971, 971, 971…\n$ p4n                        <dbl> 700, 700, 700, 700, 700, 700, 700, 700, 700…\n$ p5n                        <dbl> 700, 700, 700, 700, 700, 700, 700, 700, 700…\n$ un                         <dbl> 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4…\n$ un.region.code             <dbl> 142, 142, 142, 142, 142, 142, 142, 142, 142…\n$ un.regionintermediate.code <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ un.regionsub.code          <dbl> 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34,…\n$ unpd                       <dbl> 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4…\n$ vdem                       <dbl> 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36,…\n$ wvs                        <dbl> 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4…\n```\n:::\n:::\n\n\n- **Polity5:** Has some indicators to describe how state structures have been changing overtime. According with \n\n  1. **DEMOC**: Goes from 0 to 10 to measure ***democracy*** level in a country in a specific time.\n  2. **AUTOC**: Goes from 0 to 10 to measure ***autocracy*** level in a country in a specific time.\n  3. **POLITY**: Results from the operation of subtracting AUTOC from DEMOC measure, to provide a single regime score that ranges from +10 (full democracy) to -10 (full autocracy).\n  4. **DURABLE**: Saves the number of years since the last substantive change in authority characteristics (defined as a 3-point change in the POLITY score).\n\nThis data comes from the [Polity5 Annual Time-Series, 1946-2018](https://www.systemicpeace.org/inscrdata.html) Excel report.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPolity5 <-\n  \n  fread(here(\"Raw-data/Polity5.csv\"), na.strings = \"\",\n        select = c(\"ccode\" = \"integer\",\n                   \"year\" = \"integer\",\n                   \"democ\" = \"double\",\n                   \"autoc\" = \"double\",\n                   \"polity\" = \"double\",\n                   \"durable\" = \"integer\")\n  \n  # According to the users’ manual polity \n  # values out of [-10,10] have a special meaning\n  )[, government_status := fcase(polity == -66, \"Interruption\",\n                                polity == -77, \"Interregnum\",\n                                polity == -88, \"Transition\",\n                                default = \"Active\")\n  ][government_status != \"Active\", \n    c(\"democ\",\"autoc\",\"polity\") := NA_real_]\n\n\nglimpse(Polity5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 17,574\nColumns: 7\n$ ccode             <int> 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 70…\n$ year              <int> 1800, 1801, 1802, 1803, 1804, 1805, 1806, 1807, 1808…\n$ democ             <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ autoc             <dbl> 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7…\n$ polity            <dbl> -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, …\n$ durable           <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ government_status <chr> \"Active\", \"Active\", \"Active\", \"Active\", \"Active\", \"A…\n```\n:::\n:::\n\n\n\n# Data understanding\n\nBefore starting the cleaning process itself we need to understand some general characteristics of data. This step it's crucial in order to know *how to interpret the data* and *what cleaning step are needed*.\n\n## Validation process\n\nOnce we have all the data in R we can start to check the information that contains each column of `ProtestRaw`, as there is no documentation related to the main data we need to check if the columns really have what we think after reading each title:\n\n- **id** shares an unique number for each row. And we see the test bellow.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestRaw[, .(`Number of Rows` = .N,\n               `Number of Ids` = uniqueN(id))] |>\n  style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-82b791b8{}.cl-82b009b6{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-82b009ca{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-82b027f2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-82b05574{width:94.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82b0557e{width:107.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82b05588{width:94.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82b05589{width:107.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-82b791b8'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82b05589\"><p class=\"cl-82b027f2\"><span class=\"cl-82b009b6\">Number of Rows</span></p></td><td class=\"cl-82b05588\"><p class=\"cl-82b027f2\"><span class=\"cl-82b009b6\">Number of Ids</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82b0557e\"><p class=\"cl-82b027f2\"><span class=\"cl-82b009ca\">17,145</span></p></td><td class=\"cl-82b05574\"><p class=\"cl-82b027f2\"><span class=\"cl-82b009ca\">17,145</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- **country** stores the names of countries where each protest happened. This dataset has information about 166 countries.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestRaw[,.(`Number of Countries` = uniqueN(country))] |>\n  style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-82d97364{}.cl-82ce5d76{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-82ce5da8{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-82ce7090{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-82d0cbf6{width:129.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82d0cc14{width:129.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-82d97364'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82d0cc14\"><p class=\"cl-82ce7090\"><span class=\"cl-82ce5d76\">Number of Countries</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82d0cbf6\"><p class=\"cl-82ce7090\"><span class=\"cl-82ce5da8\">166</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- **ccode** provides a code reference for each country. By making a simple check we can confirm that a country can have more than one code depending of the protest `year`, as we can see bellow.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestRaw[order(year), \n           .(ccode, year, n_country_ccode = uniqueN(ccode)),\n           by = \"country\"\n][n_country_ccode > 1, \n  unique(.SD,by = \"ccode\"),\n  .SDcols = c(\"country\",\"ccode\",\"year\")] |>\n  style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-82fcc4e0{}.cl-82f4fa4e{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-82f4fa58{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-82f50c00{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-82f50c0a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-82f53d88{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53d92{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53d93{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53d9c{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53d9d{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53d9e{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53da6{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53da7{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53da8{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53db0{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53dba{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53dbb{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53dbc{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53dbd{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53dc4{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53dc5{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53dce{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-82f53dcf{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-82fcc4e0'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82f53dce\"><p class=\"cl-82f50c00\"><span class=\"cl-82f4fa4e\">country</span></p></td><td class=\"cl-82f53dc5\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa4e\">ccode</span></p></td><td class=\"cl-82f53dcf\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa4e\">year</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82f53d92\"><p class=\"cl-82f50c00\"><span class=\"cl-82f4fa58\">Yugoslavia</span></p></td><td class=\"cl-82f53d88\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">345</span></p></td><td class=\"cl-82f53d93\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">1,990</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82f53d9c\"><p class=\"cl-82f50c00\"><span class=\"cl-82f4fa58\">Yugoslavia</span></p></td><td class=\"cl-82f53d9d\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">347</span></p></td><td class=\"cl-82f53d9e\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">1,992</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82f53da6\"><p class=\"cl-82f50c00\"><span class=\"cl-82f4fa58\">Ethiopia</span></p></td><td class=\"cl-82f53da7\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">530</span></p></td><td class=\"cl-82f53da8\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">1,990</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82f53da6\"><p class=\"cl-82f50c00\"><span class=\"cl-82f4fa58\">Ethiopia</span></p></td><td class=\"cl-82f53da7\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">529</span></p></td><td class=\"cl-82f53da8\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">2,016</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82f53dba\"><p class=\"cl-82f50c00\"><span class=\"cl-82f4fa58\">Yemen</span></p></td><td class=\"cl-82f53db0\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">679</span></p></td><td class=\"cl-82f53dbb\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">1,990</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-82f53dbc\"><p class=\"cl-82f50c00\"><span class=\"cl-82f4fa58\">Yemen</span></p></td><td class=\"cl-82f53dbd\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">678</span></p></td><td class=\"cl-82f53dc4\"><p class=\"cl-82f50c0a\"><span class=\"cl-82f4fa58\">2,016</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nAs we don't know which rule is following the code let's use the data provided by the `countrycode` package to find out the `ccode` source. To make data that we need to perform a join operation in two parts by starting with countries that have the same name and year in both data frames.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCountryCodeExactMatch <-\n  CountryCode[ProtestRaw[, unique(.SD), \n                         .SDcols = c(\"country\",\"ccode\",\"year\")],\n                on = c(\"country.name.en\" = \"country\", \"year\"),\n                nomatch = 0]\n```\n:::\n\n\nTo perform the join operation with the missing countries we need to apply a more complex approach by applying the following steps :\n\n1. Selecting the countries that wasn't found using a exact match\n2. Creating a table with all possible combinations between missing countries and regular expressions provided by `countrycode` package \n3. Selecting rows that match the regular expression\n4. Adding possible country codes and years by regular expression\n5. Selecting rows with the same country and year as `ProtestRaw`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCountryCodeRegexMatch <-\n  \n    # Selecting the countries that wasn't found using a exact match\n    ProtestRaw[! country %chin% CountryCodeExactMatch$country.name.en, \n               .(country = unique(country))\n\n    # Creating country and regex combinations\n    ][, CJ(country = country,\n           country.name.en.regex = CountryCode$country.name.en.regex,\n           unique = TRUE)\n      \n    # Selecting regex that match with countries' names\n    ][, match_text := str_detect(str_to_lower(country), country.name.en.regex),\n      by = .I\n    ][match_text == TRUE,\n      unique(.SD, by = \"country\"),\n      .SDcols = c(\"country\", \"country.name.en.regex\")\n\n    # Adding possible country codes and years by regular expression\n    ][CountryCode, on = \"country.name.en.regex\", nomatch = 0\n\n    # Selecting rows with the same country and year as ProtestRaw\n    ][ProtestRaw[, unique(.SD), .SDcols = c(\"country\",\"ccode\",\"year\")],\n      on = c(\"country\", \"year\"), nomatch = 0\n    ][, `:=`(country.name.en = country,\n             country = NULL)]\n```\n:::\n\n\nAfter applying all this steps we just need to bind both data frames and confirm if we found all possible country codes for every country listed in `ProtestRaw`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCountryCodeConsolidated <-\n  rbind(CountryCodeExactMatch,\n        CountryCodeRegexMatch)\n\n# Checking it was any country and year that wasn't found\nProtestRaw[, c(\"country\",\"year\")\n][!CountryCodeConsolidated, \n  on = c(\"country\" = \"country.name.en\",\"year\")] |>\n  (\\(x) data.table(`Missing Rows` = nrow(x)))() |>\n  style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-833f7eac{}.cl-8338bc8e{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8338bc98{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8338cefe{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8338f082{width:93.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8338f08c{width:93.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-833f7eac'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-8338f08c\"><p class=\"cl-8338cefe\"><span class=\"cl-8338bc8e\">Missing Rows</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-8338f082\"><p class=\"cl-8338cefe\"><span class=\"cl-8338bc98\">0</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nGreat, now we can use `CountryCodeConsolidated` to identify which code source match better with the `ccode`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCountryCodeConsolidated[, melt(.SD, id.vars = c(\"country.name.en\",\"ccode\"),\n                               variable.name = \"Country Code Source\", \n                               value.name = \"possible_code\",\n                               variable.factor = FALSE, na.rm = TRUE),\n                        .SDcols = !patterns(\"^(year|country\\\\.name\\\\.en\\\\.regex)$\")\n][, unique(.SD)\n][, .(`% Found` = mean(ccode == possible_code, na.rm = TRUE) |> percent(accuracy = 0.01),\n      `Number of Countries` = uniqueN(country.name.en)),\n  by = \"Country Code Source\"\n][order(-`% Found`,-`Country Code Source`)\n][1:8, style_table(.SD)]\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-83659cfe{}.cl-835cfbb2{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-835cfbbc{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-835d0e5e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-835d0e68{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-835d4176{width:133.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d4180{width:129.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d4181{width:67pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d418a{width:129.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d418b{width:133.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d418c{width:67pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d4194{width:129.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d4195{width:67pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d4196{width:133.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d419e{width:67pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d419f{width:133.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d41a8{width:129.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d41a9{width:67pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d41aa{width:133.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-835d41b2{width:129.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-83659cfe'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-835d41aa\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbb2\">Country Code Source</span></p></td><td class=\"cl-835d41a9\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbb2\">% Found</span></p></td><td class=\"cl-835d41b2\"><p class=\"cl-835d0e68\"><span class=\"cl-835cfbb2\">Number of Countries</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-835d4176\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">p5n</span></p></td><td class=\"cl-835d4181\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">96.53%</span></p></td><td class=\"cl-835d4180\"><p class=\"cl-835d0e68\"><span class=\"cl-835cfbbc\">166</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-835d418b\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">p4n</span></p></td><td class=\"cl-835d418c\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">96.53%</span></p></td><td class=\"cl-835d418a\"><p class=\"cl-835d0e68\"><span class=\"cl-835cfbbc\">166</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-835d4196\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">cown</span></p></td><td class=\"cl-835d4195\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">95.21%</span></p></td><td class=\"cl-835d4194\"><p class=\"cl-835d0e68\"><span class=\"cl-835cfbbc\">164</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-835d4196\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">gwn</span></p></td><td class=\"cl-835d4195\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">95.15%</span></p></td><td class=\"cl-835d4194\"><p class=\"cl-835d0e68\"><span class=\"cl-835cfbbc\">163</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-835d4196\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">wvs</span></p></td><td class=\"cl-835d4195\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">0.00%</span></p></td><td class=\"cl-835d4194\"><p class=\"cl-835d0e68\"><span class=\"cl-835cfbbc\">155</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-835d4196\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">vdem</span></p></td><td class=\"cl-835d4195\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">0.00%</span></p></td><td class=\"cl-835d4194\"><p class=\"cl-835d0e68\"><span class=\"cl-835cfbbc\">164</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-835d418b\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">unpd</span></p></td><td class=\"cl-835d418c\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">0.00%</span></p></td><td class=\"cl-835d418a\"><p class=\"cl-835d0e68\"><span class=\"cl-835cfbbc\">160</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-835d419f\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">un.regionsub.code</span></p></td><td class=\"cl-835d419e\"><p class=\"cl-835d0e5e\"><span class=\"cl-835cfbbc\">0.00%</span></p></td><td class=\"cl-835d41a8\"><p class=\"cl-835d0e68\"><span class=\"cl-835cfbbc\">160</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nAs we can see in the table above the country code source with more matching codes is the [Polity V Project](http://www.systemicpeace.org/inscr/p5manualv2018.pdf) which monitor regime change and study the effects of regime authority worldwide. This open the door to add more features to our main data, but first it is important to understand why some the `p4n` didn't match with the original `ccode`.\n\nThe **first group** is the one that has a `p4n` the value but it is different to the `ccode` during some years, as you can see bellow. We will correct the `ccode` in those cases during this project.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCountryCodeConsolidated[p5n != ccode,\n                  .(start_year = min(year),\n                    end_year = max(year)),\n                  by = c(\"country.name.en\",\"ccode\",\"p5n\")] |>\n  style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-83903630{}.cl-83875af6{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83875b00{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83876c62{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83876c6c{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83879fac{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fad{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fb6{width:108.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fb7{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fc0{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fc1{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fca{width:108.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fcb{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fcc{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fcd{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fd4{width:108.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fd5{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fd6{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fde{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fdf{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fe0{width:108.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fe8{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879fe9{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879ff2{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879ff3{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879ffc{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83879ffd{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8387a006{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8387a007{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8387a008{width:108.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8387a010{width:108.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8387a011{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8387a01a{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8387a01b{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8387a01c{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-83903630'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-8387a010\"><p class=\"cl-83876c62\"><span class=\"cl-83875af6\">country.name.en</span></p></td><td class=\"cl-8387a011\"><p class=\"cl-83876c6c\"><span class=\"cl-83875af6\">ccode</span></p></td><td class=\"cl-8387a01c\"><p class=\"cl-83876c6c\"><span class=\"cl-83875af6\">p5n</span></p></td><td class=\"cl-8387a01b\"><p class=\"cl-83876c6c\"><span class=\"cl-83875af6\">start_year</span></p></td><td class=\"cl-8387a01a\"><p class=\"cl-83876c6c\"><span class=\"cl-83875af6\">end_year</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83879fb6\"><p class=\"cl-83876c62\"><span class=\"cl-83875b00\">Germany</span></p></td><td class=\"cl-83879fac\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">255</span></p></td><td class=\"cl-83879fc0\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">260</span></p></td><td class=\"cl-83879fb7\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">1,990</span></p></td><td class=\"cl-83879fad\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">1,990</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83879fca\"><p class=\"cl-83876c62\"><span class=\"cl-83875b00\">Yugoslavia</span></p></td><td class=\"cl-83879fc1\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">345</span></p></td><td class=\"cl-83879fcc\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">347</span></p></td><td class=\"cl-83879fcd\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">1,992</span></p></td><td class=\"cl-83879fcb\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">1,992</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83879fd4\"><p class=\"cl-83876c62\"><span class=\"cl-83875b00\">Ethiopia</span></p></td><td class=\"cl-83879fd6\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">530</span></p></td><td class=\"cl-83879fd5\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">529</span></p></td><td class=\"cl-83879fdf\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">1,994</span></p></td><td class=\"cl-83879fde\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">2,015</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83879fe0\"><p class=\"cl-83876c62\"><span class=\"cl-83875b00\">Sudan</span></p></td><td class=\"cl-83879ff3\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">625</span></p></td><td class=\"cl-83879fe9\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">626</span></p></td><td class=\"cl-83879ff2\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">2,012</span></p></td><td class=\"cl-83879fe8\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">2,018</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83879fe0\"><p class=\"cl-83876c62\"><span class=\"cl-83875b00\">Yemen</span></p></td><td class=\"cl-83879ff3\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">678</span></p></td><td class=\"cl-83879fe9\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">679</span></p></td><td class=\"cl-83879ff2\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">2,016</span></p></td><td class=\"cl-83879fe8\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">2,018</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-8387a008\"><p class=\"cl-83876c62\"><span class=\"cl-83875b00\">Vietnam</span></p></td><td class=\"cl-83879ffd\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">816</span></p></td><td class=\"cl-83879ffc\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">818</span></p></td><td class=\"cl-8387a007\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">1,990</span></p></td><td class=\"cl-8387a006\"><p class=\"cl-83876c6c\"><span class=\"cl-83875b00\">2,018</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nThe **second group** correspond to the years when the bellow countries didn't have a `p5n` assign, so we will remand the code that was given by `ccode`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCountryCodeConsolidated[is.na(p5n),\n                        .(p5n = unique(p5n),\n                          start_year = min(year),\n                          end_year = max(year)),\n                        by = c(\"country.name.en\",\"ccode\")\n  ][1:8] |>\n  style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-83ba4538{}.cl-83b14c62{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83b14c6c{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83b15df6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83b15e00{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83b195be{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195bf{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195c8{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195c9{width:118.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195d2{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195d3{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195d4{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195d5{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195dc{width:118.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195dd{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195e6{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195e7{width:118.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195f0{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195f1{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195f2{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195fa{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b195fb{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b19604{width:118.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b19605{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b1960e{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b1960f{width:118.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b19618{width:73.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b19619{width:40.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b1961a{width:52.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83b19622{width:68.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-83ba4538'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83b1960f\"><p class=\"cl-83b15df6\"><span class=\"cl-83b14c62\">country.name.en</span></p></td><td class=\"cl-83b1961a\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c62\">ccode</span></p></td><td class=\"cl-83b19619\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c62\">p5n</span></p></td><td class=\"cl-83b19618\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c62\">start_year</span></p></td><td class=\"cl-83b19622\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c62\">end_year</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83b195c9\"><p class=\"cl-83b15df6\"><span class=\"cl-83b14c6c\">Canada</span></p></td><td class=\"cl-83b195d2\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">20</span></p></td><td class=\"cl-83b195bf\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\"></span></p></td><td class=\"cl-83b195c8\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,019</span></p></td><td class=\"cl-83b195be\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,020</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83b195dc\"><p class=\"cl-83b15df6\"><span class=\"cl-83b14c6c\">Cuba</span></p></td><td class=\"cl-83b195dd\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">40</span></p></td><td class=\"cl-83b195d3\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\"></span></p></td><td class=\"cl-83b195d4\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,019</span></p></td><td class=\"cl-83b195d5\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,020</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83b195dc\"><p class=\"cl-83b15df6\"><span class=\"cl-83b14c6c\">Haiti</span></p></td><td class=\"cl-83b195dd\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">41</span></p></td><td class=\"cl-83b195d3\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\"></span></p></td><td class=\"cl-83b195d4\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,019</span></p></td><td class=\"cl-83b195d5\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,020</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83b195e7\"><p class=\"cl-83b15df6\"><span class=\"cl-83b14c6c\">Dominican Republic</span></p></td><td class=\"cl-83b195f2\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">42</span></p></td><td class=\"cl-83b195f0\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\"></span></p></td><td class=\"cl-83b195e6\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,019</span></p></td><td class=\"cl-83b195f1\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,020</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83b195dc\"><p class=\"cl-83b15df6\"><span class=\"cl-83b14c6c\">Jamaica</span></p></td><td class=\"cl-83b195dd\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">51</span></p></td><td class=\"cl-83b195d3\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\"></span></p></td><td class=\"cl-83b195d4\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,019</span></p></td><td class=\"cl-83b195d5\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,020</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83b195dc\"><p class=\"cl-83b15df6\"><span class=\"cl-83b14c6c\">Mexico</span></p></td><td class=\"cl-83b195dd\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">70</span></p></td><td class=\"cl-83b195d3\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\"></span></p></td><td class=\"cl-83b195d4\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,019</span></p></td><td class=\"cl-83b195d5\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,020</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83b195dc\"><p class=\"cl-83b15df6\"><span class=\"cl-83b14c6c\">Guatemala</span></p></td><td class=\"cl-83b195dd\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">90</span></p></td><td class=\"cl-83b195d3\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\"></span></p></td><td class=\"cl-83b195d4\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,019</span></p></td><td class=\"cl-83b195d5\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,020</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83b19604\"><p class=\"cl-83b15df6\"><span class=\"cl-83b14c6c\">Honduras</span></p></td><td class=\"cl-83b195fb\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">91</span></p></td><td class=\"cl-83b1960e\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\"></span></p></td><td class=\"cl-83b195fa\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,019</span></p></td><td class=\"cl-83b19605\"><p class=\"cl-83b15e00\"><span class=\"cl-83b14c6c\">2,020</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- **region** classifies countries in 8 regions: North America, Central America, South America, Europe, Africa, MENA, Asia and Oceania.\n\n- **location** identifies in which cites the protest took place. Even though the data it's very messy we might extract some useful information from it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  ProtestRaw[country == \"United Kingdom\", .N,\n             .(country, location)\n  ][order(-N)\n  ][location %like% \",|Edinburgh\"\n  ][1:5] |>\n    style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-83e0ec42{}.cl-83d784b8{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83d784c2{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83d79b4c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83d79b56{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83d7d77e{width:32.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d788{width:98.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d789{width:826.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d792{width:98.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d793{width:32.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d79c{width:826.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d79d{width:98.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d79e{width:826.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d7a6{width:32.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d7a7{width:98.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d7a8{width:826.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d7b0{width:32.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d7b1{width:98.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d7b2{width:826.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d7d7ba{width:32.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-83e0ec42'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83d7d7b1\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784b8\">country</span></p></td><td class=\"cl-83d7d7b2\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784b8\">location</span></p></td><td class=\"cl-83d7d7ba\"><p class=\"cl-83d79b56\"><span class=\"cl-83d784b8\">N</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83d7d788\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">United Kingdom</span></p></td><td class=\"cl-83d7d789\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">Edinburgh</span></p></td><td class=\"cl-83d7d77e\"><p class=\"cl-83d79b56\"><span class=\"cl-83d784c2\">38</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83d7d792\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">United Kingdom</span></p></td><td class=\"cl-83d7d79c\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">London, London Region</span></p></td><td class=\"cl-83d7d793\"><p class=\"cl-83d79b56\"><span class=\"cl-83d784c2\">3</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83d7d79d\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">United Kingdom</span></p></td><td class=\"cl-83d7d79e\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">Downing Street, London</span></p></td><td class=\"cl-83d7d7a6\"><p class=\"cl-83d79b56\"><span class=\"cl-83d784c2\">3</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83d7d79d\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">United Kingdom</span></p></td><td class=\"cl-83d7d79e\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">Bristol, Norwich, Birmingham, Reading, Bradford, Gillingham, Worcester, Weston super Mare, Sandwell, Greenich, Southamption, Tower Hamlets, Bexley, Southwark</span></p></td><td class=\"cl-83d7d7a6\"><p class=\"cl-83d79b56\"><span class=\"cl-83d784c2\">1</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83d7d7a7\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">United Kingdom</span></p></td><td class=\"cl-83d7d7a8\"><p class=\"cl-83d79b4c\"><span class=\"cl-83d784c2\">Southampton, Plymouth, Newbury, Leeds, London, Newham, Walton on Thames, Elmbridge, Liecester, Bexley, Catford</span></p></td><td class=\"cl-83d7d7b0\"><p class=\"cl-83d79b56\"><span class=\"cl-83d784c2\">1</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- **protest** shows 1 when the row is related to a protest and 0 otherwise.\n\n- **year**, **startyear**, **startmonth**  and **startday** define when each protest took place.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  ProtestRaw[, .(`% of year equals to startyear` = \n                   mean(year == startyear, na.rm = TRUE)|> percent())] |>\n    style_table() |>\n    align(j = 1, align = \"center\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-8400d7be{}.cl-83f7d95c{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83f7d966{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83f7f680{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83f7f69e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83f846e4{width:170.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83f846f8{width:170.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-8400d7be'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83f846f8\"><p class=\"cl-83f7f680\"><span class=\"cl-83f7d95c\">% of year equals to startyear</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-83f846e4\"><p class=\"cl-83f7f69e\"><span class=\"cl-83f7d966\">100%</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- **endyear**, **endmonth**  and **endday** defines when each protest ended.\n\n- **protestnumber** counts the number of protests that have occurred during a year in a particular country, but the next table shows the exception to the rule.\n \n  - Cambodia in 2003 is missing the first protestnumber\n  - Cambodia in 2004 is missing the second protestnumber\n  - Yugoslavia in 1992 is duplicating the first protestnumber\n\nAs we can not ask any one why that happen we will assume that this was a collection problem and we can correct them during the cleaning process.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  ProtestRaw[order(country,year,startmonth,startday), \n             .(startmonth, startday, id, protestnumber ,\n               protest_num_check = max(protestnumber) != uniqueN(id) & \n                                   sum(protest) != 0),\n             by = c(\"country\",\"year\")\n  ][protest_num_check == TRUE, !c(\"protest_num_check\")\n  ][1:7\n  ][, c(\"id\",\"year\") := lapply(.SD,as.character), \n    .SDcols = c(\"id\",\"year\")] |>\n    style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-843c56b8{}.cl-8433f554{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8433f568{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84340698{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-843406a2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84343b36{width:98.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b40{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b41{width:45pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b4a{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b4b{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b4c{width:78pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b54{width:45pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b55{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b5e{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b5f{width:98.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b60{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b68{width:78pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b69{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b6a{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b72{width:45pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b73{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b74{width:78pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b7c{width:98.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b7d{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b86{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b87{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b88{width:78pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b90{width:45pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b91{width:98.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b92{width:74.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b9a{width:45pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b9b{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343b9c{width:98.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343ba4{width:78pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84343ba5{width:81.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-843c56b8'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84343b92\"><p class=\"cl-84340698\"><span class=\"cl-8433f554\">country</span></p></td><td class=\"cl-84343b9a\"><p class=\"cl-84340698\"><span class=\"cl-8433f554\">year</span></p></td><td class=\"cl-84343ba4\"><p class=\"cl-843406a2\"><span class=\"cl-8433f554\">startmonth</span></p></td><td class=\"cl-84343b9b\"><p class=\"cl-843406a2\"><span class=\"cl-8433f554\">startday</span></p></td><td class=\"cl-84343ba5\"><p class=\"cl-84340698\"><span class=\"cl-8433f554\">id</span></p></td><td class=\"cl-84343b9c\"><p class=\"cl-843406a2\"><span class=\"cl-8433f554\">protestnumber</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84343b4a\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">Cambodia</span></p></td><td class=\"cl-84343b41\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">2003</span></p></td><td class=\"cl-84343b4c\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">6</span></p></td><td class=\"cl-84343b4b\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">9</span></p></td><td class=\"cl-84343b40\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">8112003002</span></p></td><td class=\"cl-84343b36\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">2</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84343b60\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">Cambodia</span></p></td><td class=\"cl-84343b54\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">2003</span></p></td><td class=\"cl-84343b68\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">7</span></p></td><td class=\"cl-84343b55\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">20</span></p></td><td class=\"cl-84343b5e\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">8112003003</span></p></td><td class=\"cl-84343b5f\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">3</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84343b60\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">Cambodia</span></p></td><td class=\"cl-84343b54\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">2004</span></p></td><td class=\"cl-84343b68\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">1</span></p></td><td class=\"cl-84343b55\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">25</span></p></td><td class=\"cl-84343b5e\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">8112004001</span></p></td><td class=\"cl-84343b5f\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">1</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84343b60\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">Cambodia</span></p></td><td class=\"cl-84343b54\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">2004</span></p></td><td class=\"cl-84343b68\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">11</span></p></td><td class=\"cl-84343b55\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">13</span></p></td><td class=\"cl-84343b5e\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">8112004003</span></p></td><td class=\"cl-84343b5f\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">3</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84343b69\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">Yugoslavia</span></p></td><td class=\"cl-84343b72\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">1992</span></p></td><td class=\"cl-84343b74\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">2</span></p></td><td class=\"cl-84343b6a\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">23</span></p></td><td class=\"cl-84343b73\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">3471992001</span></p></td><td class=\"cl-84343b7c\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">1</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84343b69\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">Yugoslavia</span></p></td><td class=\"cl-84343b72\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">1992</span></p></td><td class=\"cl-84343b74\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">2</span></p></td><td class=\"cl-84343b6a\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">23</span></p></td><td class=\"cl-84343b73\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">3471992002</span></p></td><td class=\"cl-84343b7c\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">2</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84343b86\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">Yugoslavia</span></p></td><td class=\"cl-84343b90\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">1992</span></p></td><td class=\"cl-84343b88\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">3</span></p></td><td class=\"cl-84343b7d\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">2</span></p></td><td class=\"cl-84343b87\"><p class=\"cl-84340698\"><span class=\"cl-8433f568\">3451992001</span></p></td><td class=\"cl-84343b91\"><p class=\"cl-843406a2\"><span class=\"cl-8433f568\">1</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- **protesterviolence** shows 1 when there was violence in the protester side and 0 otherwise.\n\n- **participants** has 771 unique values and estimate the number of participants that were part of each protest. As you can see this column needs a lot of cleaning to be useful.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  ProtestRaw[, .N, participants\n  ][c(1:3,(length(N)-3):length(N))] |>\n    style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-8462ccda{}.cl-845b581a{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-845b5824{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-845b6bde{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-845b6bdf{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-845b9f96{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fa0{width:149pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9faa{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fab{width:149pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fb4{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fb5{width:149pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fbe{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fbf{width:149pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fc0{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fc8{width:149pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fc9{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-845b9fd2{width:149pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-8462ccda'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-845b9fd2\"><p class=\"cl-845b6bde\"><span class=\"cl-845b581a\">participants</span></p></td><td class=\"cl-845b9fc9\"><p class=\"cl-845b6bdf\"><span class=\"cl-845b581a\">N</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-845b9fa0\"><p class=\"cl-845b6bde\"><span class=\"cl-845b5824\">1000s</span></p></td><td class=\"cl-845b9f96\"><p class=\"cl-845b6bdf\"><span class=\"cl-845b5824\">1,187</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-845b9fab\"><p class=\"cl-845b6bde\"><span class=\"cl-845b5824\">1000</span></p></td><td class=\"cl-845b9faa\"><p class=\"cl-845b6bdf\"><span class=\"cl-845b5824\">978</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-845b9fab\"><p class=\"cl-845b6bde\"><span class=\"cl-845b5824\">500</span></p></td><td class=\"cl-845b9faa\"><p class=\"cl-845b6bdf\"><span class=\"cl-845b5824\">272</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-845b9fb5\"><p class=\"cl-845b6bde\"><span class=\"cl-845b5824\">More than 500,000 people</span></p></td><td class=\"cl-845b9fb4\"><p class=\"cl-845b6bdf\"><span class=\"cl-845b5824\">1</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-845b9fbf\"><p class=\"cl-845b6bde\"><span class=\"cl-845b5824\">More than 1,000</span></p></td><td class=\"cl-845b9fbe\"><p class=\"cl-845b6bdf\"><span class=\"cl-845b5824\">1</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-845b9fab\"><p class=\"cl-845b6bde\"><span class=\"cl-845b5824\">About 10000</span></p></td><td class=\"cl-845b9faa\"><p class=\"cl-845b6bdf\"><span class=\"cl-845b5824\">1</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-845b9fc8\"><p class=\"cl-845b6bde\"><span class=\"cl-845b5824\">559</span></p></td><td class=\"cl-845b9fc0\"><p class=\"cl-845b6bdf\"><span class=\"cl-845b5824\">1</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- **participants_category** has 6 categories to define the number of participants that participated in the protest. Then we will try to complete the missing values using the *participants* column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestRaw[, .N, participants_category]|>\n  style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-8485dcac{}.cl-847d5168{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-847d5172{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-847d67b6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-847d67c0{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-847d9d80{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9d8a{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9d8b{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9d94{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9d95{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9d9e{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9da8{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9da9{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9daa{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9db2{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9db3{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-847d9dbc{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-8485dcac'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-847d9dbc\"><p class=\"cl-847d67b6\"><span class=\"cl-847d5168\">participants_category</span></p></td><td class=\"cl-847d9db3\"><p class=\"cl-847d67c0\"><span class=\"cl-847d5168\">N</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-847d9d8a\"><p class=\"cl-847d67b6\"><span class=\"cl-847d5172\"></span></p></td><td class=\"cl-847d9d80\"><p class=\"cl-847d67c0\"><span class=\"cl-847d5172\">7,258</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-847d9d94\"><p class=\"cl-847d67b6\"><span class=\"cl-847d5172\">50-99</span></p></td><td class=\"cl-847d9d8b\"><p class=\"cl-847d67c0\"><span class=\"cl-847d5172\">2,508</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-847d9d94\"><p class=\"cl-847d67b6\"><span class=\"cl-847d5172\">100-999</span></p></td><td class=\"cl-847d9d8b\"><p class=\"cl-847d67c0\"><span class=\"cl-847d5172\">3,204</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-847d9d94\"><p class=\"cl-847d67b6\"><span class=\"cl-847d5172\">2000-4999</span></p></td><td class=\"cl-847d9d8b\"><p class=\"cl-847d67c0\"><span class=\"cl-847d5172\">1,580</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-847d9d9e\"><p class=\"cl-847d67b6\"><span class=\"cl-847d5172\">1000-1999</span></p></td><td class=\"cl-847d9d95\"><p class=\"cl-847d67c0\"><span class=\"cl-847d5172\">483</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-847d9da9\"><p class=\"cl-847d67b6\"><span class=\"cl-847d5172\">5000-10000</span></p></td><td class=\"cl-847d9da8\"><p class=\"cl-847d67c0\"><span class=\"cl-847d5172\">642</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-847d9db2\"><p class=\"cl-847d67b6\"><span class=\"cl-847d5172\">&gt;10000</span></p></td><td class=\"cl-847d9daa\"><p class=\"cl-847d67c0\"><span class=\"cl-847d5172\">1,470</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- **protesteridentity** has information about the people who protest but some times has information about the protest itself as we can see in the next table.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  ProtestRaw[, .N, protesteridentity\n  ][order(-N)\n  ][c(2:4,(length(N)-3):length(N))] |>\n  style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-84abf392{}.cl-84a32988{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84a32992{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84a33bee{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84a33bf8{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84a36d1c{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d26{width:408.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d30{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d31{width:408.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d3a{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d3b{width:408.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d3c{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d3d{width:408.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d44{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d45{width:408.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d4e{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d4f{width:408.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d58{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84a36d59{width:408.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-84abf392'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84a36d59\"><p class=\"cl-84a33bee\"><span class=\"cl-84a32988\">protesteridentity</span></p></td><td class=\"cl-84a36d58\"><p class=\"cl-84a33bf8\"><span class=\"cl-84a32988\">N</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84a36d26\"><p class=\"cl-84a33bee\"><span class=\"cl-84a32992\">protesters</span></p></td><td class=\"cl-84a36d1c\"><p class=\"cl-84a33bf8\"><span class=\"cl-84a32992\">1,541</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84a36d31\"><p class=\"cl-84a33bee\"><span class=\"cl-84a32992\">students</span></p></td><td class=\"cl-84a36d30\"><p class=\"cl-84a33bf8\"><span class=\"cl-84a32992\">646</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84a36d3b\"><p class=\"cl-84a33bee\"><span class=\"cl-84a32992\">workers</span></p></td><td class=\"cl-84a36d3a\"><p class=\"cl-84a33bf8\"><span class=\"cl-84a32992\">273</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84a36d3d\"><p class=\"cl-84a33bee\"><span class=\"cl-84a32992\">o neill supporters</span></p></td><td class=\"cl-84a36d3c\"><p class=\"cl-84a33bf8\"><span class=\"cl-84a32992\">1</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84a36d45\"><p class=\"cl-84a33bee\"><span class=\"cl-84a32992\">trade unionists, civil society groups, students and former soldiers</span></p></td><td class=\"cl-84a36d44\"><p class=\"cl-84a33bf8\"><span class=\"cl-84a32992\">1</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84a36d45\"><p class=\"cl-84a33bee\"><span class=\"cl-84a32992\">protesters opposed to renewing the licence of a controversial mining company</span></p></td><td class=\"cl-84a36d44\"><p class=\"cl-84a33bf8\"><span class=\"cl-84a32992\">1</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84a36d4f\"><p class=\"cl-84a33bee\"><span class=\"cl-84a32992\">protesters opposed to counting irregularities during the png parliament elections</span></p></td><td class=\"cl-84a36d4e\"><p class=\"cl-84a33bf8\"><span class=\"cl-84a32992\">1</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- The **4 protesterdemand** columns have 7 categories to define protesters' requests.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  ProtestRaw[, .SD, .SDcols = patterns(\"^id$|^protesterdemand\")\n  ][, melt(.SD, id.vars = \"id\" , value.name = \"Protester Demand\")\n  ][`Protester Demand` %like% \"\\\\w\",\n    .(`Number of Protests` = uniqueN(id)), \n    by = \"Protester Demand\"\n  ][order(-`Number of Protests`)] |>\n    style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-84d1d60c{}.cl-84c88e62{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84c88e6c{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84c8a294{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84c8a295{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84c8d070{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d071{width:147.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d07a{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d084{width:147.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d085{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d086{width:147.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d08e{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d098{width:147.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d099{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d0a2{width:147.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d0a3{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84c8d0a4{width:147.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-84d1d60c'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84c8d0a4\"><p class=\"cl-84c8a294\"><span class=\"cl-84c88e62\">Protester Demand</span></p></td><td class=\"cl-84c8d0a3\"><p class=\"cl-84c8a295\"><span class=\"cl-84c88e62\">Number of Protests</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84c8d071\"><p class=\"cl-84c8a294\"><span class=\"cl-84c88e6c\">political behavior, process</span></p></td><td class=\"cl-84c8d070\"><p class=\"cl-84c8a295\"><span class=\"cl-84c88e6c\">10,750</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84c8d084\"><p class=\"cl-84c8a294\"><span class=\"cl-84c88e6c\">labor wage dispute</span></p></td><td class=\"cl-84c8d07a\"><p class=\"cl-84c8a295\"><span class=\"cl-84c88e6c\">2,211</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84c8d086\"><p class=\"cl-84c8a294\"><span class=\"cl-84c88e6c\">removal of politician</span></p></td><td class=\"cl-84c8d085\"><p class=\"cl-84c8a295\"><span class=\"cl-84c88e6c\">1,889</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84c8d084\"><p class=\"cl-84c8a294\"><span class=\"cl-84c88e6c\">price increases, tax policy</span></p></td><td class=\"cl-84c8d07a\"><p class=\"cl-84c8a295\"><span class=\"cl-84c88e6c\">1,414</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84c8d084\"><p class=\"cl-84c8a294\"><span class=\"cl-84c88e6c\">police brutality</span></p></td><td class=\"cl-84c8d07a\"><p class=\"cl-84c8a295\"><span class=\"cl-84c88e6c\">1,101</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84c8d098\"><p class=\"cl-84c8a294\"><span class=\"cl-84c88e6c\">social restrictions</span></p></td><td class=\"cl-84c8d08e\"><p class=\"cl-84c8a295\"><span class=\"cl-84c88e6c\">684</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84c8d0a2\"><p class=\"cl-84c8a294\"><span class=\"cl-84c88e6c\">land farm issue</span></p></td><td class=\"cl-84c8d099\"><p class=\"cl-84c8a295\"><span class=\"cl-84c88e6c\">582</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- The **7 stateresponse** columns have 7 categories to define States' responses. By checking the table bellow we can see that *accommodation* was misspelled as *accomodation* which also the attribute that we want to understand.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  ProtestRaw[, .SD, .SDcols = patterns(\"^id$|^stateresponse\")\n  ][, melt(.SD, id.vars = \"id\", value.name = \"State Response\")\n  ][`State Response` %like% \"\\\\w\",\n    .(`Number of Protests` = uniqueN(id)), \n    by = \"State Response\"\n  ][order(-`Number of Protests`)] |>\n    style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-84f6c80e{}.cl-84ee9e5e{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84ee9e68{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84eeb0f6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84eeb100{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84eedfe0{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eedfe1{width:103.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eedfea{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eedfeb{width:103.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eedff4{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eedff5{width:103.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eedffe{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eedfff{width:103.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eee008{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eee009{width:103.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eee00a{width:122.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84eee012{width:103.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-84f6c80e'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84eee012\"><p class=\"cl-84eeb0f6\"><span class=\"cl-84ee9e5e\">State Response</span></p></td><td class=\"cl-84eee00a\"><p class=\"cl-84eeb100\"><span class=\"cl-84ee9e5e\">Number of Protests</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84eedfe1\"><p class=\"cl-84eeb0f6\"><span class=\"cl-84ee9e68\">ignore</span></p></td><td class=\"cl-84eedfe0\"><p class=\"cl-84eeb100\"><span class=\"cl-84ee9e68\">8,285</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84eedfeb\"><p class=\"cl-84eeb0f6\"><span class=\"cl-84ee9e68\">crowd dispersal</span></p></td><td class=\"cl-84eedfea\"><p class=\"cl-84eeb100\"><span class=\"cl-84ee9e68\">4,772</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84eedff5\"><p class=\"cl-84eeb0f6\"><span class=\"cl-84ee9e68\">arrests</span></p></td><td class=\"cl-84eedff4\"><p class=\"cl-84eeb100\"><span class=\"cl-84ee9e68\">2,149</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84eedff5\"><p class=\"cl-84eeb0f6\"><span class=\"cl-84ee9e68\">accomodation</span></p></td><td class=\"cl-84eedff4\"><p class=\"cl-84eeb100\"><span class=\"cl-84ee9e68\">1,527</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84eedfff\"><p class=\"cl-84eeb0f6\"><span class=\"cl-84ee9e68\">shootings</span></p></td><td class=\"cl-84eedffe\"><p class=\"cl-84eeb100\"><span class=\"cl-84ee9e68\">936</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84eedfff\"><p class=\"cl-84eeb0f6\"><span class=\"cl-84ee9e68\">killings</span></p></td><td class=\"cl-84eedffe\"><p class=\"cl-84eeb100\"><span class=\"cl-84ee9e68\">828</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-84eee009\"><p class=\"cl-84eeb0f6\"><span class=\"cl-84ee9e68\">beatings</span></p></td><td class=\"cl-84eee008\"><p class=\"cl-84eeb100\"><span class=\"cl-84ee9e68\">803</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n- **notes** has a paragraph that describes each protest. The average number of words for each paragraph is ***98 words*** which is higher than median so there are some outliers with very long paragraphs.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestRaw[notes %like% \"\\\\w\", \n           .(id, `Number of words` = str_squish(notes) |> str_count(\" \")+1)\n          ][, word_avg := mean(`Number of words`)] |>\n  ggplot(aes(`Number of words`))+\n  geom_histogram(bins = 30, fill = \"dodgerblue3\")+\n  geom_vline(aes(xintercept = word_avg))+\n  scale_x_log10()+\n  labs(title = \"Distribution of number of words per note\")\n```\n\n::: {.cell-output-display}\n![](main_files/figure-html/notes-check-1.png){width=1152}\n:::\n:::\n\n\n- **sources** has a paragraph that describes where the is information is coming from. The average number of words for each paragraph is ***34 words*** which is higher than median so there are some outliers with very long paragraphs.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestRaw[sources %like% \"\\\\w\", \n           .(id, `Number of words` = str_squish(sources) |> str_count(\" \")+1)\n          ][, word_avg := mean(`Number of words`)] |>\n  ggplot(aes(`Number of words`))+\n  geom_histogram(bins = 30, fill = \"dodgerblue3\")+\n  geom_vline(aes(xintercept = word_avg))+\n  scale_x_log10()+\n  labs(title = \"Distribution of number of words per source\")\n```\n\n::: {.cell-output-display}\n![](main_files/figure-html/sources-check-1.png){width=1152}\n:::\n:::\n\n\n\n## Missing data distribution\n\nIt is important to know that the data has ***17,145 rows***, but not all rows represent a protest, ***1,906 rows*** of the data represent years where the wasn't any protest in a particular country. Let's see how is the missing value distribution in each case.\n\n\n::: {.cell fig.dim='[14,10]'}\n\n```{.r .cell-code}\nProtestRaw[, lapply(.SD, function(x) x |> is.na() |> mean()),\n    by = .(protest = fifelse(protest>0,\"Protest\",\"No Protest\"))\n  ][, melt(.SD, id.vars = \"protest\", \n           variable.name = \"Variables\",\n           value.name = \"# Missing\")\n  ][, Variables := fct_reorder(Variables, `# Missing`, sum)] |>\n  ggplot(aes(`# Missing`, `Variables`))+\n  geom_blank(aes(x = `# Missing` *1.1))+\n  geom_col(fill = \"dodgerblue3\")+\n  geom_text(aes(label = percent(`# Missing`, accuracy = 0.01)),\n            hjust = -0.3)+\n  scale_x_continuous(labels = percent_format(accuracy = 1))+\n  facet_wrap(~protest)+\n  labs(title = \"Proportions of missing values per variable\",\n       x = \"% Of Missing Values\")\n```\n\n::: {.cell-output-display}\n![](main_files/figure-html/missing-data-plot-1.png){width=1344}\n:::\n:::\n\n\nAs we can check the rows that doesn't represent a protest are very empty. We will remove them as they won't be useful to answer the question.\n\n# Data cleaning process\n\nAfter checking the data feature by feature we got a better sense of the data and a better vision of the problems that need to be solved before getting insight from the data. \n\n## Initial cleaning\n\nIn this section we will apply simplest cleaning steps at once.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestSimpleClean <-\n  \n  # Fixing wrong ccodes\n  CountryCodeConsolidated[, .(country = country.name.en, year, p4n)\n  ][, unique(.SD)\n  ][ProtestRaw, on = c(\"country\",\"year\")\n  ][ccode != p4n, ccode := p4n\n  ][, !c(\"p4n\")\n    \n  # Taking out rows that aren't related to a protest\n  ][protest == 1, !c(\"protest\")\n        \n  # Transforming start and end dates to a date format\n  ][, `:=`(start_date =  \n             paste(startyear,startmonth,startday,sep = \"-\") |> ymd(),\n           end_date =  \n             paste(endyear,endmonth,endday,sep = \"-\") |> ymd())\n  ][order(start_date), \n    .SD, .SDcols = !patterns(\"\\\\w+year$|\\\\w+month$|\\\\w+day$\")\n   \n  # Correcting the protestnumber of each year and country\n  ][, protestnumber := 1:.N,\n    by = c(\"country\",\"year\")\n    \n  # Setting Country and Location Case\n  ][,`:=`(location = lower_clean_name(location) |> \n                     str_replace_all(\"kiev\",\"kyiv\") |>\n                     str_replace_all(\"chittagong\",\"chattogram\"),\n          country = lower_clean_name(country)) ]\n```\n:::\n\n\n\n## Completing participants_category with participants column\n\nAs the `participants` column contains aproximations related to number of people who took place during each protests makes more same to complete the missing `participants_category` based on those approximations by using the next code.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestCategoryClean <-\n  \n  # Let's work only with protests that are missing participants_category\n  ProtestSimpleClean[is.na(participants_category)\n                     \n  # Applying general cleaning to participants\n  ][,participants := participants |>  \n                      str_to_lower() |> \n                      str_remove_all(\",\") |>\n                      str_squish()\n    \n  # Getting the average of participants intervals\n  ][, c(\"min\",\"max\") := tstrsplit(participants,\"-| to \", fixed = FALSE)\n  ][participants %like% \"between \\\\d+ and \\\\d+\", \n    `:=`(min = str_match(participants, \"between (\\\\d+) and \\\\d+\")[,2],\n         max = str_match(participants, \"between \\\\d+ and (\\\\d+)\")[,2])\n  ][, c(\"min\",\"max\") := lapply(.(min, max), \n                               \\(x) str_extract(x, \"\\\\d+\") |> as.double())\n  ][, `:=`(participants_clean = (min+max)/2,\n           min = NULL,\n           max = NULL)\n    \n  # Getting number of protesters by using regular expressions\n  ][participants %like% \"^\\\\d+$\" & is.na(participants_clean),\n    participants_clean := \n      as.double(participants)\n  ][participants %like% \"^\\\\d+\\\\+$\" & is.na(participants_clean),\n    participants_clean := \n      str_remove_all(participants,\"\\\\+\") |> \n      as.double()\n  ][participants %like% \"^\\\\d+s\" & is.na(participants_clean),\n    participants_clean :=\n      str_match(participants,\"^(\\\\d+)s\")[,2] |>  \n      as.double()\n  ][participants %like% \"^[><]\\\\d+\" & is.na(participants_clean),\n    participants_clean := \n      str_match(participants,\"^[><](\\\\d+)\")[,2] |>\n      as.double()\n    \n  # Getting number of protesters by reading the notes variable\n  ][id == 922006004, \n    participants_clean := 50\n  ][id == 6602002005, \n    participants_clean := 2000\n    \n  # Creating a new participants_category variable\n  ][, `:=`(participants_category = \n             fcase( between(participants_clean, 1, 99), \"1-99\",\n                    between(participants_clean, 100, 999), \"100-999\",\n                    between(participants_clean, 1000, 1999), \"1000-1999\",\n                    between(participants_clean, 2000, 4999), \"2000-4999\",\n                    between(participants_clean, 5000, 10000), \"5000-10000\",\n                    participants_clean > 10000, \">10000\"),\n           participants_clean = NULL)\n    \n  # Adding protests that aren't missing participants_category  \n  ][, rbind(.SD,\n            ProtestSimpleClean[!is.na(participants_category)])\n    \n  # Making participants_category a factor variable \n  # to make easier to plot the data later\n  ][participants_category == \"50-99\",\n    participants_category := \"1-99\"\n  ][, `:=`(participants_category = factor(participants_category,\n                                          levels = c(\"Missing\",   \"1-99\",     \n                                                     \"100-999\",   \"1000-1999\", \n                                                     \"2000-4999\", \"5000-10000\",\n                                                     \">10000\")),\n           participants = NULL)]\n\n\n  ProtestCategoryClean[, .N, participants_category] |>\n    style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-86c78c9a{}.cl-86c04840{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-86c04854{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-86c058bc{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-86c058c6{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-86c0865c{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-86c0865d{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-86c08666{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-86c08667{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-86c08670{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-86c08671{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-86c0867a{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-86c0867b{width:134.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-86c78c9a'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-86c0867b\"><p class=\"cl-86c058bc\"><span class=\"cl-86c04840\">participants_category</span></p></td><td class=\"cl-86c0867a\"><p class=\"cl-86c058c6\"><span class=\"cl-86c04840\">N</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-86c0865d\"><p class=\"cl-86c058bc\"><span class=\"cl-86c04854\">1-99</span></p></td><td class=\"cl-86c0865c\"><p class=\"cl-86c058c6\"><span class=\"cl-86c04854\">3,303</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-86c08667\"><p class=\"cl-86c058bc\"><span class=\"cl-86c04854\">1000-1999</span></p></td><td class=\"cl-86c08666\"><p class=\"cl-86c058c6\"><span class=\"cl-86c04854\">1,608</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-86c08667\"><p class=\"cl-86c058bc\"><span class=\"cl-86c04854\">&gt;10000</span></p></td><td class=\"cl-86c08666\"><p class=\"cl-86c058c6\"><span class=\"cl-86c04854\">2,121</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-86c08667\"><p class=\"cl-86c058bc\"><span class=\"cl-86c04854\">100-999</span></p></td><td class=\"cl-86c08666\"><p class=\"cl-86c058c6\"><span class=\"cl-86c04854\">4,917</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-86c08667\"><p class=\"cl-86c058bc\"><span class=\"cl-86c04854\">5000-10000</span></p></td><td class=\"cl-86c08666\"><p class=\"cl-86c058c6\"><span class=\"cl-86c04854\">1,260</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-86c08667\"><p class=\"cl-86c058bc\"><span class=\"cl-86c04854\">2000-4999</span></p></td><td class=\"cl-86c08666\"><p class=\"cl-86c058c6\"><span class=\"cl-86c04854\">2,019</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-86c08671\"><p class=\"cl-86c058bc\"><span class=\"cl-86c04854\"></span></p></td><td class=\"cl-86c08670\"><p class=\"cl-86c058c6\"><span class=\"cl-86c04854\">11</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nThere 11 protests where the wasn't any information about the number of participants and label them as Missing.\n\n## Reshaping protesterdemand and stateresponse\n\nNow we reorganize the `protesterdemand` and `stateresponse` to have a single column for each category having 1 if the each category is related to the protest and 0 otherwise.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestReshaped <-\n  \n  # Melting protesterdemand and stateresponse just keeping protest id\n  ProtestCategoryClean[, melt(.SD, id.vars = \"id\",\n                              measure.vars =\n                                str_subset(names(.SD),\n                                           \"^(protesterdemand|stateresponse)\"),\n                              value.name = \"actions\",\n                              variable.factor = FALSE)\n  ][actions %like% \"\\\\w\"\n  ][,`:=`(variable = fifelse(variable %like% \"^protesterdemand\", \n                             \"dem\",\"res\"),\n          actions = fifelse(actions == \"accomodation\",\n                            \"accommodation\",actions),\n          action_occur = TRUE)\n  ][, unique(.SD) \n  ][, dcast(.SD, id ~ variable + actions, \n            value.var = \"action_occur\", fill = FALSE)\n    \n    \n  # Adding the other variables to have back the data complete\n  ][, merge(.SD, \n            ProtestCategoryClean, \n            by = \"id\", all = TRUE)\n  ][, .SD, \n    .SDcols = !patterns(\"^(protesterdemand|stateresponse)\")\n  ][,{ \n    ColsToFill <- str_subset(names(.SD),\"^(dem|res)\")\n    copy(.SD)[is.na(res_shootings), (ColsToFill) := FALSE]\n  }][, protesterviolence := protesterviolence == 1]\n```\n:::\n\n\nAfter applying those changes we can see that currently all the columns have less\nthan 5% of missing values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestReshaped[, lapply(.SD, function(x) mean(is.na(x)))\n  ][, id := 1\n  ][, melt(.SD, id.vars = \"id\", \n           variable.name = \"Variables\",\n           value.name = \"# Missing\")\n  ][, `:=`(Variables = fct_reorder(Variables, `# Missing`, sum))] |>\n  ggplot(aes(`# Missing`, `Variables`))+\n  geom_blank(aes(x = `# Missing` *1.15))+\n  geom_col(fill = \"dodgerblue3\")+\n  geom_text(aes(label = percent(`# Missing`, accuracy = 0.01)), hjust = -0.3)+\n  scale_x_continuous(labels = percent_format(accuracy = 0.01))+\n  expand_limits(x = 1)+\n  labs(title = \"Proportions of missing\\nvalues per variable\",\n       x = \"% Of Missing Values\")\n```\n\n::: {.cell-output-display}\n![](main_files/figure-html/reshaped-missing-data-plot-1.png){width=1152}\n:::\n:::\n\n\n## Joining policatical situation\n\nAs we already confirmed that the data is related to Center for Systemic Peace data adding the variables to the main data can be done in one line of code.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestPolitical <-\n  Polity5[ProtestReshaped, on = c(\"ccode\",\"year\")]\n```\n:::\n\n\n## Extracting location data\n\nAs we know in the column `location` there is information about the place where each protests took place. I would be really interesting to extract from that field the following information:\n\n1. Does it mention if it was a national protest?\n2. How many cities mention each protest?\n3. Did the protest took place in the capital?\n\nTo achieve that we need to make the process in 3 steps.\n\n- In the first step we need check in the `location` field mention if the protest took place nationality and identify the cities that have a perfect math with the `WorldCities` data frame.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nNationalRegex <-\n  \"nationwide|(^| )national( level| including| in scope|.+cities|$|[:;,\\\\.])|across (.*country|\"\n\nCustomStopWords <-\n  c(stop_words$word, tm::stopwords(\"spanish\"), \"region\",\n    \"province\", \"district\", \"valley\", \"including\",\"cities\",\n    \"shire\", \"downtown\", \"national\", \"parliament\")\n\nProtestExactCityMatch <-\n  WorldCities[, .(city_regex = str_c(city_ascii,collapse = \"|\")),\n              by = \"country\"\n  ][ProtestPolitical, on = \"country\"\n  ][, `:=`(exact_cities_found = .(str_extract_all(location, city_regex) |> \n                                    unlist() |> \n                                    unique()),\n           is_national = location %like% str_c(NationalRegex, country,\")\"),\n           location_no_found = str_remove_all(location, city_regex) |>\n                               str_remove_all(str_c(NationalRegex, country,\")\")) |>\n                               str_squish()),\n    by = \"id\"\n  ][,`:=`(num_cities = sapply(exact_cities_found, length),\n          city_regex = NULL)\n  ][!location_no_found %like% \"\\\\w\" |\n      location_no_found %chin% CustomStopWords,\n    location_no_found := NA_character_]\n```\n:::\n\n\nAfter extracting all matching cities and checking if the location field identified each protest as a national one we saved the remaining words in the variable `location_no_found` for further analysis.\n\n- Assuming the in many cases of `location_no_found` the remaining words just make reference to one city we can compare all the cities of each country and take the city that  minimize the LCS (longest common sub-string distance) measure from the `stringdist` package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nStringApproxCols <- \n  c(\"id\", \"country\", \"location\", \"location_no_found\", \"num_cities\")\n\nOneWorldCityApprox <-\n  ProtestExactCityMatch[!is.na(location_no_found), ..StringApproxCols] |>\n  find_string_approximation(DT2 = WorldCities[,.(country, city_ascii)],\n                            id.var = \"id\",\n                            merge.by = \"country\",\n                            match.vars = c(\"location_no_found\",\"city_ascii\")) |>\n  setnames(\"location_no_found\",\"city_word\")\n```\n:::\n\n\nAt the end, we could find 897 protest cities. but that with that we can find cities if the field describes more than one city. To check that let's see the number of words distribution.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_word_found_distribution(ProtestExactCityMatch,\n                             word.count.var = \"location_no_found\",\n                             prostest.id.found = OneWorldCityApprox$id,\n                             success.label = \"City found\",\n                             no.found.label = \"City no found\",\n                             label.colors = c(\"City found\" = \"dodgerblue3\",\n                                              \"City no found\" = \"brown2\"),\n                             subtitle = \"After applying one city approximation match\")\n```\n\n::: {.cell-output-display}\n![](main_files/figure-html/one-city-match-plot-1.png){width=1152}\n:::\n:::\n\n\nAs we can see most of the cities found only have one of two words and only some few one have 3 or 4 words. It is all also important to check that rows with one word didn't find any city related so we can take those cases out as we won't any extra city related those cases.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nManyWorldCityApprox <-\n  lapply(1:4, function(n_gram){\n  ProtestExactCityMatch[!is.na(location_no_found) &\n                          str_count(location_no_found,\" \") >= 1 &\n                          !id %in% OneWorldCityApprox$id,\n                        unnest_tokens(.SD, city_word,location_no_found,\n                                      token = \"ngrams\", n = n_gram),\n                        .SDcols = StringApproxCols\n  ][! city_word %chin% CustomStopWords,\n    find_string_approximation(.SD,\n                              DT2 = WorldCities[,.(country, city_ascii)],\n                              id.var = \"id\",\n                              merge.by = \"country\",\n                              match.vars = c(\"city_word\",\"city_ascii\"))\n  ][, n_gram := n_gram]}) |>\n  rbindlist() \n```\n:::\n\n\nIn next chart we can see how we could find cities in very long text with more than 20 words by applying string distance approximation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_word_found_distribution(ProtestExactCityMatch,\n                             word.count.var = \"location_no_found\",\n                             prostest.id.found = c(OneWorldCityApprox$id,\n                                                   ManyWorldCityApprox$id),\n                             success.label = \"City found\",\n                             no.found.label = \"City no found\",\n                             label.colors = c(\"City found\" = \"dodgerblue3\",\n                                              \"City no found\" = \"brown2\"),\n                             subtitle = \"After applying many city approximation match\")\n```\n\n::: {.cell-output-display}\n![](main_files/figure-html/several-city-match-plot-1.png){width=1152}\n:::\n:::\n\n\nNow it's time to add the cities found to the main data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestLocationExtracted <-\n  list(OneWorldCityApprox[, c(\"id\",\"country\",\"city_ascii\")],\n       ManyWorldCityApprox[, c(\"id\",\"country\",\"city_ascii\")],\n       ProtestExactCityMatch[, .(city_ascii = exact_cities_found[[1]]),\n                             by = c(\"id\",\"country\")]) |>\n  rbindlist() |>\n  unique() |>\n  merge(WorldCities,\n        by = c(\"country\",\"city_ascii\"), all.x = TRUE) |>\n  (\\(DT) DT[, .(cities_found = .(city_ascii),\n                num_cities = .N,\n                in_capital = sum(capital == \"primary\",na.rm = TRUE) > 0,\n                total_population = sum(population, na.rm = TRUE)),\n            by = \"id\"\n         ][ProtestExactCityMatch[,!c(\"exact_cities_found\",\n                                     \"num_cities\",\n                                     \"location_no_found\",\n                                     \"location\")],\n           on = \"id\"\n         ][is.na(num_cities), \n           `:=`(num_cities = 0,\n                in_capital = FALSE)])()\n```\n:::\n\n\n## Final Result\n\nAfter applying many transformations to the data we are ready to explore it. The new data it is tidy format and we will easy to manipulate across the exploration process.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(ProtestLocationExtracted)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 15,239\nColumns: 37\n$ id                                <dbl> 201990001, 201990002, 201990003, 201…\n$ cities_found                      <list> <NULL>, <\"montreal\", \"quebec city\">…\n$ num_cities                        <int> 0, 2, 2, 2, 2, 2, 0, 0, 1, 1, 0, 1, …\n$ in_capital                        <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, F…\n$ total_population                  <dbl> NA, 4224698, 4224698, 4224698, 42246…\n$ country                           <chr> \"canada\", \"canada\", \"canada\", \"canad…\n$ ccode                             <int> 20, 20, 20, 20, 20, 20, 20, 20, 20, …\n$ year                              <int> 1990, 1990, 1990, 1990, 1990, 1990, …\n$ democ                             <dbl> 10, 10, 10, 10, 10, 10, 10, 10, 10, …\n$ autoc                             <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ polity                            <dbl> 10, 10, 10, 10, 10, 10, 10, 10, 10, …\n$ durable                           <int> 102, 102, 102, 102, 102, 102, 103, 1…\n$ government_status                 <chr> \"Active\", \"Active\", \"Active\", \"Activ…\n$ `dem_labor wage dispute`          <lgl> TRUE, FALSE, FALSE, FALSE, FALSE, FA…\n$ `dem_land farm issue`             <lgl> FALSE, FALSE, FALSE, TRUE, FALSE, FA…\n$ `dem_police brutality`            <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, T…\n$ `dem_political behavior, process` <lgl> TRUE, TRUE, TRUE, FALSE, TRUE, FALSE…\n$ `dem_price increases, tax policy` <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, F…\n$ `dem_removal of politician`       <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, F…\n$ `dem_social restrictions`         <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, F…\n$ res_accommodation                 <lgl> FALSE, FALSE, FALSE, TRUE, TRUE, FAL…\n$ res_arrests                       <lgl> FALSE, FALSE, FALSE, FALSE, TRUE, FA…\n$ res_beatings                      <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, F…\n$ `res_crowd dispersal`             <lgl> FALSE, FALSE, FALSE, FALSE, TRUE, TR…\n$ res_ignore                        <lgl> TRUE, TRUE, TRUE, FALSE, FALSE, FALS…\n$ res_killings                      <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, F…\n$ res_shootings                     <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, T…\n$ region                            <chr> \"North America\", \"North America\", \"N…\n$ protestnumber                     <int> 1, 2, 3, 4, 5, 6, 1, 2, 1, 1, 2, 1, …\n$ protesterviolence                 <lgl> FALSE, FALSE, FALSE, TRUE, TRUE, FAL…\n$ participants_category             <fct> 1000-1999, 1000-1999, 100-999, 100-9…\n$ protesteridentity                 <chr> \"unspecified\", \"unspecified\", \"separ…\n$ sources                           <chr> \"1. great canadian train journeys in…\n$ notes                             <chr> \"canada s railway passenger system w…\n$ start_date                        <date> 1990-01-15, 1990-06-25, 1990-07-01,…\n$ end_date                          <date> 1990-01-15, 1990-06-25, 1990-07-01,…\n$ is_national                       <lgl> TRUE, FALSE, FALSE, FALSE, FALSE, FA…\n```\n:::\n:::\n\n\n\n# Data exploration\n\nA we can see the data have some numeric and logical variables that can be converted to numeric. It would be really interesting if we can confirm which variables go in same or opposite directions. To find out that we can use the `correlation` function from the **correlation** which also give us confident intervals to confirm that the correlation are statistician significance.\n\n## Exploring numeric correlations\n\nThe first step it's to take out variables that don't bring big insights and case of finding any relation, then we select logical and numeric variables and calculate correlations for all numeric and logical variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCorSummary <-\n  ProtestLocationExtracted[, !c(\"id\",\"ccode\",\"democ\",\"autoc\", \"durable\")\n  ][, participants_category := as.integer(participants_category)\n  ][, lapply(.SD, \\(x) x * 1),\n    .SDcols = \\(x) is.logical(x) | is.numeric(x)] |> \n  correlation() |>\n  as.data.table()\n\nCorSummary[1:6,\n           lapply(.SD, \\(x) if(is.numeric(x)){round(x,2)}else{x}),\n           .SDcols = !patterns(\"^(t|df_error)$\")] |>\n  style_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-98ccf330{}.cl-98c30dde{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-98c30df2{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-98c32260{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-98c3226a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-98c36568{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36572{width:140.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c3657c{width:60.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c3657d{width:56pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c3657e{width:54.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36586{width:45.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36587{width:115.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36590{width:80.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36591{width:60.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c3659a{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c3659b{width:54.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365a4{width:45.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365a5{width:56pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365ae{width:80.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365b8{width:140.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365b9{width:115.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365ba{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365c2{width:54.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365c3{width:56pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365cc{width:140.4pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365cd{width:115.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365d6{width:45.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365d7{width:60.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365d8{width:80.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365e0{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365e1{width:54.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365ea{width:80.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365eb{width:115.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365ec{width:60.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365f4{width:140.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365f5{width:56pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c365fe{width:45.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36608{width:56pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36612{width:60.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36613{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36614{width:54.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c3661c{width:80.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c3661d{width:140.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36626{width:115.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98c36627{width:45.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-98ccf330'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-98c3661c\"><p class=\"cl-98c32260\"><span class=\"cl-98c30dde\">Parameter1</span></p></td><td class=\"cl-98c3661d\"><p class=\"cl-98c32260\"><span class=\"cl-98c30dde\">Parameter2</span></p></td><td class=\"cl-98c36627\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30dde\">r</span></p></td><td class=\"cl-98c36613\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30dde\">CI</span></p></td><td class=\"cl-98c36608\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30dde\">CI_low</span></p></td><td class=\"cl-98c36612\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30dde\">CI_high</span></p></td><td class=\"cl-98c36613\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30dde\">p</span></p></td><td class=\"cl-98c36626\"><p class=\"cl-98c32260\"><span class=\"cl-98c30dde\">Method</span></p></td><td class=\"cl-98c36614\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30dde\">n_Obs</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-98c36590\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">num_cities</span></p></td><td class=\"cl-98c36572\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">in_capital</span></p></td><td class=\"cl-98c36586\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.26</span></p></td><td class=\"cl-98c36568\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.95</span></p></td><td class=\"cl-98c3657d\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.24</span></p></td><td class=\"cl-98c3657c\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.27</span></p></td><td class=\"cl-98c36568\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.00</span></p></td><td class=\"cl-98c36587\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">Pearson correlation</span></p></td><td class=\"cl-98c3657e\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">15,239</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-98c365ae\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">num_cities</span></p></td><td class=\"cl-98c365b8\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">total_population</span></p></td><td class=\"cl-98c365a4\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.15</span></p></td><td class=\"cl-98c3659a\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.95</span></p></td><td class=\"cl-98c365a5\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.13</span></p></td><td class=\"cl-98c36591\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.17</span></p></td><td class=\"cl-98c3659a\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.00</span></p></td><td class=\"cl-98c365b9\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">Pearson correlation</span></p></td><td class=\"cl-98c3659b\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">13,029</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-98c365ae\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">num_cities</span></p></td><td class=\"cl-98c365b8\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">year</span></p></td><td class=\"cl-98c365a4\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.04</span></p></td><td class=\"cl-98c3659a\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.95</span></p></td><td class=\"cl-98c365a5\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.02</span></p></td><td class=\"cl-98c36591\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.05</span></p></td><td class=\"cl-98c3659a\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.00</span></p></td><td class=\"cl-98c365b9\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">Pearson correlation</span></p></td><td class=\"cl-98c3659b\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">15,239</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-98c365d8\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">num_cities</span></p></td><td class=\"cl-98c365cc\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">polity</span></p></td><td class=\"cl-98c365d6\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.00</span></p></td><td class=\"cl-98c365ba\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.95</span></p></td><td class=\"cl-98c365c3\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">-0.02</span></p></td><td class=\"cl-98c365d7\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.01</span></p></td><td class=\"cl-98c365ba\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">1.00</span></p></td><td class=\"cl-98c365cd\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">Pearson correlation</span></p></td><td class=\"cl-98c365c2\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">13,804</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-98c365d8\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">num_cities</span></p></td><td class=\"cl-98c365cc\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">dem_labor wage dispute</span></p></td><td class=\"cl-98c365d6\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">-0.03</span></p></td><td class=\"cl-98c365ba\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.95</span></p></td><td class=\"cl-98c365c3\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">-0.05</span></p></td><td class=\"cl-98c365d7\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">-0.02</span></p></td><td class=\"cl-98c365ba\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.00</span></p></td><td class=\"cl-98c365cd\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">Pearson correlation</span></p></td><td class=\"cl-98c365c2\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">15,239</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-98c365ea\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">num_cities</span></p></td><td class=\"cl-98c365f4\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">dem_land farm issue</span></p></td><td class=\"cl-98c365fe\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">-0.02</span></p></td><td class=\"cl-98c365e0\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.95</span></p></td><td class=\"cl-98c365f5\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">-0.04</span></p></td><td class=\"cl-98c365ec\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">-0.01</span></p></td><td class=\"cl-98c365e0\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">0.22</span></p></td><td class=\"cl-98c365eb\"><p class=\"cl-98c32260\"><span class=\"cl-98c30df2\">Pearson correlation</span></p></td><td class=\"cl-98c365e1\"><p class=\"cl-98c3226a\"><span class=\"cl-98c30df2\">15,239</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nAs we have many significant correlations, let's center our attention in higher significan ones\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(110)\nCorSummary[p < 0.05 & abs(r) >= 0.10] |>\n  graph_from_data_frame(directed = FALSE) |>\n  ggraph(layout = \"with_dh\")+\n  geom_edge_link(aes(edge_color = r), \n                 edge_width = 1)+\n  geom_node_point(size = 3)+\n  geom_node_text(aes(label = name), repel = TRUE)+\n  scale_edge_color_gradient2(low = \"red\", high = \"blue\")+\n  labs(title = \"Correlation Network\")\n```\n\n::: {.cell-output-display}\n![](main_files/figure-html/correlation-network-1.png){width=1152}\n:::\n:::\n\n\nBy checking the last graph, we can see some interesting relations:\n\n1. If protesters present violence during the manifestation it is more probable that the state responds with shootings, killings, beatings and arrests in countries with low democracy (`polity`) other wise it's more common for states to ignore the protests and crowd dispersal is independent from polity levels.\n\n2. Labor wage disputes takes place nationally in democratic countries with a low change of sharing the protest purpose demanding police brutality reduction.\n\n3. Removal a politician usually takes place in the capital of countries with low polity with many participants several times a in a year.\n\n4. When a protest is demanding a political behavior it's weird to see that protesters want other demands.  \n\n\nLet's confirm those findings adding other charts to see with extra details of each relation.\n\n\n### Distribution\n\n- Adding Confident Intervals\n- Adding text to identify each side meaning\n\n\n::: {.cell}\n\n```{.r .cell-code}\nProtestLocationExtracted[!is.na(polity), \n                         melt(.SD, id.vars = c(\"id\",\"polity\",\"protesterviolence\"),\n                              value.name = \"Happen\",\n                              variable.name = \"Response\",na.rm = TRUE), \n                         .SDcols = patterns(\"^(id|polity|protesterviolence)$|^res\")\n][, .(occurrence_prop = mean(Happen)),\n  by = .(`Protester Violence` = protesterviolence,\n         Polity = fifelse(polity <= 4, \"Low Democracy\", \"High Democracy\"),\n         Response = sub(\"^res_\",\"\",Response) |> str_to_title())\n][, dcast(.SD, ... ~ Polity, value.var = \"occurrence_prop\")\n][, `occurrence_prop_high/low_democracy` := log2(`High Democracy`/`Low Democracy`)\n][, Response := fct_reorder(Response, `occurrence_prop_high/low_democracy`, sum)] |>\n  ggplot(aes(`occurrence_prop_high/low_democracy`, Response, color = `Protester Violence`))+\n  geom_point(size = 4)+\n  geom_vline(aes(xintercept = 0), size = 1)+\n  scale_x_continuous(breaks = breaks_width(0.5))+\n  scale_color_manual(values = c(\"FALSE\" = \"dodgerblue3\", \"TRUE\" = \"brown2\"))+\n  labs(title = \"State Response Exploration\",\n       y = \"State Response\", \n       x = \"Log of Odds Ratio:\\nResponse Occurrence Between High/Low Democratic Countries\")+\n  theme(panel.grid.major.x = element_blank(),\n        panel.grid.minor.x = element_blank(),\n        legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](main_files/figure-html/unnamed-chunk-2-1.png){width=1152}\n:::\n:::\n\n\nFor example, when states response with killings the 75% percent of protests were violent.\n\n\n\n::: {.cell}\n\n:::\n\n\n\nArel-Bundock, Vincent, Nils Enevoldsen, and CJ Yetman, (2018). countrycode: An R package to convert country names and country codes. Journal of Open Source Software, 3(28), 848, https://doi.org/10.21105/joss.00848\n\nhttps://www.systemicpeace.org/inscrdata.html (Center for Systemic Peace)\n\nhttps://simplemaps.com/data/world-cities\n\n\n",
    "supporting": [
      "main_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/tabwid-1.0.0/tabwid.css\" rel=\"stylesheet\" />\r\n<link href=\"../../site_libs/tabwid-1.0.0/scrool.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}